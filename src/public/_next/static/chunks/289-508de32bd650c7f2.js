"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{1289:function(e,r,t){t.d(r,{u:function(){return he}});var n=t(85893),s=t(50555),i=t(94184),a=t.n(i),o=t(1983),m=t(51164),l=t(22657),d=t(51697),c=t(63287),u=t(98373),x=t(18310),f=t(53695),v=t(25675),h=t.n(v),N=t(11163),b=t(29321);const p=e=>{const{selectionList:r,selectedTokenName:t,disabled:s}=e,{darkMode:i}=((0,N.useRouter)(),(0,u.T)()),o=(0,f.o_)({variant:"popover",popupId:"selection"});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:a()("w-[1.6rem] h-[.42rem] flex items-center justify-between rounded-[.6rem]",o.isOpen?"bg-color-selected":"bg-color-bg2",s?"":"cursor-pointer"),...s?{}:(0,f.vW)(o),children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:a()("w-[.34rem] h-[.34rem] min-w-[.34rem] relative ml-[.04rem]",t?"":"hidden"),children:(0,n.jsx)(h(),{src:t===x.O_.FIS?(0,b.YX)(t):(0,b.Oe)(t),alt:"logo",layout:"fill"})}),t?(0,n.jsx)("div",{className:a()("ml-[.08rem] text-[.16rem]",o.isOpen?"text-text1":"text-color-text1"),children:t}):(0,n.jsx)("div",{className:a()("ml-[.16rem] text-[.14rem]",o.isOpen?"text-text2":"text-color-text2"),children:"Choose Token"})]}),(0,n.jsx)("div",{className:"mr-[.16rem]",children:(0,n.jsx)(l.j,{icon:"arrow-down",size:".1rem",color:"#848B97"})})]}),(0,n.jsx)(d.ZP,{...(0,f.ZW)(o),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},elevation:0,sx:{marginTop:".15rem","& .MuiPopover-paper":{background:i?"#6C86AD4D":"#ffffff80",border:i?"0.01rem solid #6C86AD80":"0.01rem solid #FFFFFF",backdropFilter:"blur(.4rem)",borderRadius:".3rem"},"& .MuiTypography-root":{padding:"0px"},"& .MuiBox-root":{padding:"0px"}},children:(0,n.jsxs)("div",{className:a()("w-[2.8rem] max-h-[6rem] overflow-auto",i?"dark":""),children:[(0,n.jsx)("div",{className:"text-color-text1 text-[.16rem] mt-[.2rem] ml-[.12rem] mb-[.1rem]",children:"Choose Token Type"}),0===r.length&&(0,n.jsx)("div",{className:"flex justify-center my-[.4rem]",children:(0,n.jsx)(c.z,{size:"0.3rem"})}),r.map(((s,i)=>(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between h-[.5rem] cursor-pointer mx-[.12rem]",onClick:()=>{o.close(),e.onChange(s)},children:[(0,n.jsxs)("div",{className:"flex items-center ",children:[(0,n.jsx)("div",{className:"w-[.2rem] h-[.2rem] relative",children:(0,n.jsx)(h(),{alt:"logo",layout:"fill",src:s===x.O_.FIS?(0,b.YX)(x.O_.FIS):(0,b.Oe)(s)})}),(0,n.jsx)("div",{className:"ml-[.06rem] text-color-text1 text-[.14rem]",children:s})]}),(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)("div",{className:"ml-[.12rem]",children:t===s?(0,n.jsx)(l.j,{icon:"checked-circle",size:".16rem",color:"#5A5DE0"}):(0,n.jsx)("div",{className:"w-[.16rem] h-[.16rem] rounded-full border-solid border-[1px] border-color-border3"})})})]}),i!==r.length-1&&(0,n.jsx)("div",{className:"h-[1px] mx-[.12rem] bg-color-divider2"})]},s)))]})})]})},g=e=>{const{selectionList:r,selectedStandard:t,onChange:s,isFrom:i}=e,{darkMode:o}=((0,N.useRouter)(),(0,u.T)()),m=(0,f.o_)({variant:"popover",popupId:"selection"}),c=e=>e===x.Yn.Native?"StaFi Chain":e===x.Yn.ERC20?"Ethereum":e===x.Yn.BEP20?"BSC Chain":e===x.Yn.SPL?"Solana":e===x.Yn.ICS20?"StaFiHub":e===x.Yn.Arbitrum?"Arbitrum":e===x.Yn.Optimism?"Optimism":e===x.Yn.Polygon?"Polygon":e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:a()("mt-[.06rem] flex items-center rounded-[.3rem] h-[.42rem] justify-between",r.length>0?"cursor-pointer":"cursor-default",m.isOpen?"bg-color-selected":"bg-color-bg2"),...r.length>0?(0,f.vW)(m):{},children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:a()("w-[.34rem] h-[.34rem] relative ml-[.04rem]",t?"":"invisible"),children:(0,n.jsx)(h(),{src:(0,b.Uc)(t),alt:"logo",layout:"fill"})}),t?(0,n.jsx)("div",{className:a()("ml-[.08rem] min-w-[1.4rem] text-[.16rem]",m.isOpen?"text-text1":"text-color-text1",""),children:c(t)}):(0,n.jsx)("div",{className:a()("ml-[.08rem] min-w-[1.4rem] text-[.14rem]",m.isOpen?"text-text2":"text-color-text2",""),children:"Choose a Chain"})]}),(0,n.jsx)("div",{className:"ml-[.12rem] mr-[.16rem]",children:(0,n.jsx)(l.j,{icon:"arrow-down",size:".1rem",color:"#848B97"})})]}),(0,n.jsx)(d.ZP,{...(0,f.ZW)(m),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},elevation:0,sx:{marginTop:".15rem","& .MuiPopover-paper":{background:o?"#6C86AD4D":"#ffffff80",border:o?"0.01rem solid #6C86AD80":"0.01rem solid #FFFFFF",backdropFilter:"blur(.4rem)",borderRadius:".3rem"},"& .MuiTypography-root":{padding:"0px"},"& .MuiBox-root":{padding:"0px"}},children:(0,n.jsxs)("div",{className:a()("w-[3rem]",o?"dark":""),children:[(0,n.jsx)("div",{className:"text-color-text1 text-[.16rem] mt-[.2rem] ml-[.12rem] mb-[.1rem]",children:e.isFrom?"Send From":"Send To"}),r.map(((t,s)=>{return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between h-[.5rem] cursor-pointer mx-[.12rem]",onClick:()=>{m.close(),e.onChange(t)},children:[(0,n.jsxs)("div",{className:"flex items-center ",children:[(0,n.jsx)("div",{className:"w-[.2rem] h-[.2rem] relative",children:(0,n.jsx)(h(),{alt:"logo",layout:"fill",src:(0,b.Uc)(t)})}),(0,n.jsx)("div",{className:"ml-[.06rem] text-color-text1 text-[.14rem]",children:c(t)})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"text-color-text1 text-[.14rem]",children:(i=t,i===x.Yn.Native?"Native":i===x.Yn.ERC20?"ERC20":i===x.Yn.BEP20?"BEP20":i===x.Yn.SPL?"SPL":i===x.Yn.ICS20?"ICS20":i===x.Yn.Arbitrum?"Arbitrum":i===x.Yn.Optimism?"Optimism":i===x.Yn.Polygon?"Polygon":"")}),(0,n.jsx)("div",{className:"ml-[.12rem]",children:e.selectedStandard===t?(0,n.jsx)(l.j,{icon:"checked-circle",size:".16rem",color:"#5A5DE0"}):(0,n.jsx)("div",{className:"w-[.16rem] h-[.16rem] rounded-full border-solid border-[1px] border-color-border3"})})]})]}),s!==r.length-1&&(0,n.jsx)("div",{className:"h-[1px] mx-[.12rem] bg-color-divider2"})]},t);var i}))]})})]})};var j=t(83485),S=t(87905),Y=t(51247),F=t(67294),C=t(23330),k=t(74646);const y=e=>{var r,t;const{darkMode:s}=(0,u.T)(),{fee:i}=e,o=(0,f.o_)({variant:"popover",popupId:"commonTxCost"}),m=((0,S.p)("FIS"),(0,S.p)(i.tokenName)),d=(0,F.useMemo)((()=>{if(!isNaN(Number(i.amount))&&!isNaN(Number(m)))return Number(i.amount)*Number(m)+""}),[i,m]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"text-color-text2 text-[.16rem] flex cursor-pointer items-center",...(0,f.b8)(o),children:[(0,n.jsx)("span",{className:"text-[.14rem] opacity-50 mr-[.1rem]",children:"Est.Cost"}),(0,n.jsx)("span",{className:"mr-[.04rem]",children:"$"}),void 0===d||isNaN(Number(d))?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(j.G,{height:".14rem"})}):(0,k.uf)(d,{decimals:4}),(0,n.jsx)("div",{className:a()("flex items-center relative ml-[.1rem] self-center",o.isOpen?" rotate-[270deg]":" rotate-90"),children:(0,n.jsx)(l.j,{icon:"right",layout:"fill",alt:"down",size:".12rem",color:s?"#FFFFFF80":"#6C86AD"})})]}),(0,n.jsx)(Y.Z,{...(0,f.ZW)(o),transformOrigin:{horizontal:"center",vertical:"top"},anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{marginTop:".15rem","& .MuiPopover-paper":{background:s?"#6C86AD4D":"#ffffff80",border:s?"0.01rem solid #6C86AD80":"0.01rem solid #FFFFFF",backdropFilter:"blur(.4rem)",borderRadius:".3rem"},"& .MuiTypography-root":{padding:"0rem"},"& .MuiBox-root":{padding:"0rem"}},children:(0,n.jsxs)("div",{className:a()("w-[2.5rem] p-[.16rem] text-color-text2 text-[.14rem] overflow-hidden",s?"dark":""),children:[(0,n.jsxs)("div",{className:"flex justify-between mt-[.18rem]",children:[(0,n.jsx)("div",{children:"Tx Fee"}),(0,n.jsx)("div",{children:(0,C.sy)(null===(r=i)||void 0===r?void 0:r.amount)?(0,n.jsx)(j.G,{height:".16rem"}):(0,n.jsxs)(n.Fragment,{children:[(0,k.uf)(null===(t=i)||void 0===t?void 0:t.amount,{decimals:4})," ",i.tokenName]})})]}),(0,n.jsx)("div",{className:"mt-[.16rem] h-[1px] bg-color-divider2 mb-[.1rem]"}),(0,n.jsxs)("div",{className:"mt-[.16rem] text-color-text1 flex items-start justify-between",children:[(0,n.jsx)("div",{className:"",children:"Overall Tx Fee"}),(0,n.jsx)("div",{className:"flex items-center",children:(()=>{var e,r,t;return(0,n.jsx)(n.Fragment,{children:(0,C.sy)(null===(e=i)||void 0===e?void 0:e.amount)?(0,n.jsx)(j.G,{height:".16rem"}):(0,n.jsxs)("div",{children:[(0,k.uf)(Number(null===(r=i)||void 0===r?void 0:r.amount),{decimals:4})," ",null===(t=i)||void 0===t?void 0:t.tokenName]})})})()})]}),(0,n.jsxs)("div",{className:"mt-[.16rem] text-right flex items-center justify-end mb-[.16rem]",children:[(0,n.jsx)("span",{className:"mr-[.04rem]",children:"~$"}),void 0===d||isNaN(Number(d))?(0,n.jsx)(j.G,{height:".16rem"}):(0,k.uf)(d,{decimals:4})]})]})})]})};var w=t(38911),B=t(59868),E=t(89033),I=t(38350),P=t(7242),T=t(34926),A=t(39024),O=t(12564),M=t(41544),L=t(92096),R=t(37594);var q=t(23935),_=t(92652),z=t(64553),W=t(57421);var D=t(65053),G=t(44851),X=t(67491),Z=t(68701),$=(t(95576),t(83308),t(73077),t(6405),t(4516)),H=t(25648),Q=t(98867),U=t(27850),V=t(23213),J=t(41656),K=t(75562),ee=t(79836),re=t(44618),te=t(27678),ne=t(77191),se=t.n(ne);function ie(e,r){if(!e)return!1;try{const[t]=(0,ee.f)(e,r);return t}catch{return!1}}const ae=e=>!!e&&(!!/^(0x)[0-9a-f]{40}$/i.test(e)&&(!(!/^(0x|0X)[0-9a-f]{40}$/.test(e)&&!/^(0x|0X)[0-9A-F]{40}$/.test(e))||(e=>{e=e.replace(/^0x/i,"");for(var r=(0,re.Cl)(e.toLowerCase()).substr(2),t=0;t<40;t++)if(parseInt(r[t],16)>7&&e[t].toUpperCase()!==e[t]||parseInt(r[t],16)<=7&&e[t].toLowerCase()!==e[t])return!1;return!0})(e)));function oe(e){if(!e)return!1;try{return 32==se().decode(e).length}catch(r){return!1}}function me(e){return(0,te.checkAddress)(e||"","stafi")}var le=t(64358),de=t(57944),ce=t(61270),ue=t(48519),xe=t(42344),fe=t(92382);const ve=[x.O_.FIS,x.WX.rFIS,x.WX.rETH,x.WX.rBNB,x.WX.rMATIC,x.WX.rKSM,x.WX.rDOT,x.WX.rSOL,x.WX.rATOM],he=()=>{var e;const r=(0,N.useRouter)(),t=(0,O.T)(),{appEnv:i}=(0,u.T)(),{open:d,setDefaultChain:c}=(0,s.k_)(),{switchNetwork:f}=(0,W.g0)(),{metaMaskChainId:v,polkadotAccount:b,metaMaskAccount:j,solanaAccount:Y,solanaBalance:ee}=(0,L.P)(),re=(0,R.B)(T.Q2),{ethBalance:te,bnbBalance:ne}=(0,q._)();(0,F.useEffect)((()=>{t((0,Q.Ls)()),t((0,Q.Es)())}),[t]);const{bridgeSwapLoadingParams:se,erc20BridgeFee:he,bep20BridgeFee:Ne,solBridgeFee:be,ics20BridgeFee:pe,stafiHubBridgeFee:ge}=(0,O.C)((e=>({bridgeSwapLoadingParams:e.bridge.bridgeSwapLoadingParams,erc20BridgeFee:e.bridge.erc20BridgeFee,bep20BridgeFee:e.bridge.bep20BridgeFee,solBridgeFee:e.bridge.solBridgeFee,ics20BridgeFee:e.bridge.ics20BridgeFee,stafiHubBridgeFee:e.bridge.stafiHubBridgeFee}))),[je,Se]=(0,F.useState)(""),[Ye,Fe]=(0,F.useState)(""),[Ce,ke]=(0,F.useState)(""),[ye,we]=(0,F.useState)(!1),[Be,Ee]=(0,F.useState)(""),[Ie,Pe]=(0,F.useState)(),[Te,Ae]=(0,F.useState)(),[Oe,Me]=(0,F.useState)(),[Le,Re]=(0,F.useState)(!1),[qe,_e]=(0,F.useState)(""),[ze,We]=(0,F.useState)(""),De=function(e){var r;const t=(0,O.T)(),{updateFlag15s:n,refreshDataFlag:s}=(0,u.T)(),{metaMaskAccount:i,polkadotAccount:a}=(0,L.P)(),o=(0,R.B)(T.Q2),m=(0,O.C)((r=>{if(!e)return;const t=r.rToken.fisBalanceStore;return t[e]?t[e]:void 0}));return(0,F.useEffect)((()=>{t((0,M.Ri)(e))}),[t,i,a,null===(r=o)||void 0===r?void 0:r.bech32Address,e,n,s]),m}(Ie),Ge=(0,_.T)(Ie,(0,z.Sv)(Oe===x.O_.FIS?x.WX.rFIS:Oe),!0),Xe=(0,S.p)(Oe),Ze=(0,F.useMemo)((()=>(0,z.tL)(Oe)),[Oe]),$e=function(e,r){const[t,n]=(0,F.useMemo)((()=>{const t=(0,z.hu)(e),{tokenAddress:n,tokenAbi:s}=(0,z.XL)(t,r);return[n,s]}),[e,r]),{writeAsync:s}=(0,W.GG)({address:t,abi:n,functionName:"approve",args:[],chainId:e===x.Yn.BEP20?(0,P.Az)():(0,P.JB)()});return s}(Ie,Ze),{writeAsync:He}=(0,W.GG)({address:(0,I.hZ)().bridge,abi:(0,E.tc)(),functionName:"deposit",args:[],chainId:(0,P.JB)()}),{writeAsync:Qe}=(0,W.GG)({address:(0,B.nh)().bridge,abi:(0,w.ix)(),functionName:"deposit",args:[],chainId:(0,P.Az)()});(0,F.useEffect)((()=>{if(Ie)if(Ie===x.Yn.Native)Se(b||"");else if(Ie===x.Yn.ERC20||Ie===x.Yn.BEP20)Se(j||"");else if(Ie===x.Yn.SPL)Se(Y||"");else if(Ie===x.Yn.ICS20){var e;Se((null===(e=re)||void 0===e?void 0:e.bech32Address)||"")}}),[Ie,b,j,Y,re]),(0,F.useEffect)((()=>{Te===x.Yn.Native&&(b?(Fe(b),we(!1)):b||(Ee(""),Fe(""),we(!0)))}),[Te,b]),(0,F.useEffect)((()=>{Te!==x.Yn.ERC20&&Te!==x.Yn.BEP20||(j?(Fe(j),we(!1)):(Ee(""),Fe(""),we(!0)))}),[Te,j]),(0,F.useEffect)((()=>{Te===x.Yn.SPL&&(Y?(Fe(Y),we(!1)):(Ee(""),Fe(""),we(!0)))}),[Te,Y]),(0,F.useEffect)((()=>{var e,r,t;Te===x.Yn.ICS20&&((null===(e=re)||void 0===e?void 0:e.bech32Address)?(Fe(null===(t=re)||void 0===t?void 0:t.bech32Address),we(!1)):(null===(r=re)||void 0===r?void 0:r.bech32Address)||(Ee(""),Fe(""),we(!0)))}),[Te,null===(e=re)||void 0===e?void 0:e.bech32Address]);const Ue=(0,F.useMemo)((()=>!Xe||isNaN(Number(Xe))?"--":Number(Ce)*Number(Xe)+""),[Ce,Xe]),Ve=(0,F.useMemo)((()=>(0,C.MU)(Ie,Te,Oe)),[Ie,Te,Oe]),Je=(0,F.useMemo)((()=>(0,C.J7)(Ie,Te,Oe)),[Ie,Te,Oe]),Ke=(0,F.useMemo)((()=>Ie&&Te&&(Ie===x.Yn.Native||Te===x.Yn.Native)&&Ie!==x.Yn.Arbitrum&&Ie!==x.Yn.Optimism&&Te!==x.Yn.Arbitrum&&Te!==x.Yn.Optimism),[Ie,Te]),er=(0,F.useMemo)((()=>Ie&&Te&&(0,C.F6)(Ie,Te)?(0,C.F6)(Ie,Te):""),[Ie,Te]),rr=(0,F.useMemo)((()=>er.indexOf("arbitrum")>=0?"Arbitrum":er.indexOf("optimism")>=0?"Optimism":er.indexOf("bnb")>=0?"BNB":er.indexOf("polygon")>=0?"Polygon":""),[er]),tr=(e,r)=>[...ve].filter((t=>(0,C.UA)(t,e,!0)&&(0,C.UA)(t,r,!1)&&!(0,C.RV)(e,r,t)));(0,F.useEffect)((()=>{ke("")}),[Ie,Oe]);const nr=(0,F.useMemo)((()=>{const e=ye?Be:Ye;return!!e&&(Te===x.Yn.Native?ie(e,le.w6):Te===x.Yn.ERC20||Te===x.Yn.BEP20?ae(e):Te===x.Yn.SPL?oe(e):Te!==x.Yn.ICS20||me(e))}),[Te,Ye,ye,Be]),sr=(0,F.useMemo)((()=>!!Ye&&(Te===x.Yn.Native?ie(Ye,le.w6):Te===x.Yn.ERC20||Te===x.Yn.BEP20?ae(Ye):Te===x.Yn.SPL?oe(Ye):Te!==x.Yn.ICS20||me(Ye))),[Te,Ye]);(0,F.useEffect)((()=>{if(r.isReady)if(r.query.srcTokenStandard&&"string"===typeof r.query.srcTokenStandard&&Object.values(x.Yn).includes(r.query.srcTokenStandard)?r.query.srcTokenStandard&&"string"===typeof r.query.srcTokenStandard&&Ie!==r.query.srcTokenStandard&&Pe(r.query.srcTokenStandard):r.query.srcTokenStandard||Pe(void 0),r.query.dstTokenStandard&&Object.values(x.Yn).includes(r.query.dstTokenStandard)&&"string"===typeof r.query.dstTokenStandard?r.query.dstTokenStandard&&"string"===typeof r.query.dstTokenStandard&&Te!==r.query.dstTokenStandard&&Ae(r.query.dstTokenStandard):r.query.dstTokenStandard||Ae(void 0),r.query.tokenName){tr(r.query.srcTokenStandard,r.query.dstTokenStandard).indexOf(r.query.tokenName)>=0?Me(r.query.tokenName):r.replace({pathname:r.pathname,query:{...r.query,tokenName:""}},void 0,{scroll:!1})}else Me(void 0)}),[t,Oe,r,Ie,Te]),(0,F.useEffect)((()=>{(async()=>{if(b)try{const e=(await K.I.createStafiApi()).tx.bridgeSwap.transferNative(de.Z.tokenAmountToChain("10",D.n.Fis),"",Te?Te===x.Yn.SPL?x.wl.SOL:Te===x.Yn.ERC20?x.wl.ETH:Te===x.Yn.BEP20?x.wl.BSC:x.wl.STAFI:x.wl.STAFI),r=await e.paymentInfo(b),t=(0,k.pj)(r.partialFee.toJSON(),x.Wr.FIS);_e(t.toString())}catch(e){}})()}),[b,Te]),(0,F.useEffect)((()=>{(async()=>{try{var e,r;if(!(null===(e=re)||void 0===e?void 0:e.bech32Address))return;const t=await J.p.getBridgeDepositTxFee((0,T.JB)(),null===(r=re)||void 0===r?void 0:r.bech32Address,x.wl.STAFI,"ufis","1","");We(t)}catch(t){}})()}),[re]),(0,F.useEffect)((()=>{Te===x.Yn.SPL&&Oe&&Ye||Re(!1),(async()=>{if(!Ye)return;const e=await(0,ue.pS)(Ye,(0,z.tL)(Oe));Re(!e)})()}),[Te,Oe,Ye]);const ir=(0,F.useMemo)((()=>tr(Ie,Te)),[Ie,Te]),{darkMode:ar}=(0,O.C)((e=>({darkMode:e.app.darkMode}))),or=(0,F.useMemo)((()=>Ie?Ie===x.Yn.Native?{amount:Te===x.Yn.ERC20?he:Te===x.Yn.SPL?be:Te===x.Yn.ICS20?pe:Ne,tokenName:"FIS"}:Ie===x.Yn.ERC20?{amount:(0,Q.fE)(),tokenName:"ETH"}:Ie===x.Yn.BEP20?{amount:(0,Q.Rq)(),tokenName:"BNB"}:Ie===x.Yn.SPL?{amount:(0,Q.jc)(),tokenName:"SOL"}:Ie===x.Yn.ICS20?{amount:ge,tokenName:"FIS"}:{amount:"--",tokenName:"FIS"}:{amount:"--",tokenName:""}),[Ie,Te,he,Ne,be,pe,ge]),mr=(0,F.useMemo)((()=>(0,C.RV)(Ie,Te,Oe)),[Ie,Te,Oe]),lr=(0,F.useMemo)((()=>{if((Ie===x.Yn.Native||Te===x.Yn.Native)&&!b)return!0;if((Ie===x.Yn.ERC20||Ie===x.Yn.BEP20||Te===x.Yn.ERC20||Te===x.Yn.BEP20)&&!j)return!0;if((Ie===x.Yn.SPL||Te===x.Yn.SPL)&&!Y)return!0;var e;if((Ie===x.Yn.ICS20||Te===x.Yn.ICS20)&&!(null===(e=re)||void 0===e?void 0:e.bech32Address))return!0;return!1}),[Ie,b,Y,j,re,Te]),dr=(0,F.useMemo)((()=>{if(!Oe||lr)return"--";if(Oe===x.O_.FIS&&Ie===x.Yn.Native){if(isNaN(Number(De)))return"--";let e=isNaN(Number(qe))?0:Number(qe),r=isNaN(Number(or.amount))?0:Number(or.amount);return Math.max(0,Number(De)-e-r)+""}if(Oe===x.O_.FIS&&Ie===x.Yn.ICS20){if(isNaN(Number(De)))return"--";let e=isNaN(Number(ze))?0:Number(ze),r=isNaN(Number(or.amount))?0:Number(or.amount);return Math.max(0,Number(De)-e-r)+""}return Oe===x.O_.FIS?De:Ge}),[Oe,De,Ge,Ie,or,qe,ze,lr]),[cr,ur]=(0,F.useMemo)((()=>{if(er)return[!1,`Go ${rr} Bridge`];if(mr||!er&&0===ir.length)return[!0,"Unsupported Bridge Type"];if(lr)return[!1,"Connect Wallet"];if(Ie===x.Yn.Native&&Number(De)<Number(or.amount))return[!1,`Insufficient FIS. Top up ${(0,k.uf)(or.amount,{fixedDecimals:!1})} FIS now`];if(Ie===x.Yn.SPL&&Number(ee)<Number(or.amount))return[!0,"Not Enough SOL Fee"];if(Ie===x.Yn.ERC20){if(Number(v)!==(0,P.V_)())return[!1,`Wrong network, click to change into ${(0,P.ob)()}`];if(Number(te)<Number(or.amount))return[!0,"Not Enough ETH Fee"]}if(Ie===x.Yn.BEP20){if(Number(v)!==(0,P.Az)())return[!1,`Wrong network, click to change into ${(0,P.RU)()}`];if(Number(ne)<Number(or.amount))return[!0,"Not Enough BNB Fee"]}return Ie===x.Yn.ICS20&&Number(De)<Number(or.amount)?[!1,`Insufficient FIS. Top up ${(0,k.uf)(or.amount,{fixedDecimals:!1})} FIS now`]:(x.Yn.Native,Te===x.Yn.ERC20||x.Yn.BEP20,Te===x.Yn.SPL&&Le?Ye===Y?[!1,"Create SPL Token Account"]:[!0,"SPL Token Account Not Created"]:(x.Yn.ICS20,Ce&&Ie&&Te&&Oe&&!ye?isNaN(Number(Ce))||0===Number(Ce)||isNaN(Number(dr))?[!0,"Input Swap Amount"]:!dr||isNaN(Number(dr))||Number(dr)<Number(Ce)?[!0,"Insufficient Balance"]:sr?(Ie!==x.Yn.ERC20||$e&&He)&&(Ie!==x.Yn.BEP20||$e&&Qe)?[!1,"Bridge"]:[!0,"Initializing"]:[!0,"Invalid Address"]:[!0,"Bridge"]))}),[mr,dr,Ce,sr,ye,Ye,Ie,v,Y,Te,or,De,Oe,te,ne,ee,Le,lr,er,rr,ir.length,$e,He,Qe]),xr=(0,F.useMemo)((()=>ur.indexOf("Wrong net")>=0||ur.indexOf("Insufficient FIS.")>=0||er),[ur,er]);return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"mb-[.32rem] bg-color-bg2 border-[0.02rem] border-color-border1 rounded-[.3rem] flex flex-col items-stretch py-[.36rem] px-[.24rem]",children:[(0,n.jsxs)("div",{className:a()("h-[1.07rem] justify-between items-stretch",Ke?"flex":"hidden"),children:[(0,n.jsxs)("div",{className:"ml-[.0rem] flex flex-col items-start",children:[(0,n.jsx)("div",{className:"mt-[.16rem] text-color-text2 text-[.14rem]",children:"Send From"}),(0,n.jsxs)("div",{className:a()("mt-[.06rem] flex items-center h-[.42rem] justify-between bg-color-bg2 border-color-border4 border-solid border-[0.01rem] overflow-hidden rounded-[.6rem] p-[.04rem] ",Ie===x.Yn.Native&&b?"cursor-pointer":""),onClick:()=>{Ie===x.Yn.Native&&b&&(t((0,U.ho)(x.Sq.Polkadot)),t((0,U.Y8)(!0)))},children:[(0,n.jsx)("div",{className:"w-[.34rem] h-[.34rem] relative",children:(0,n.jsx)(h(),{src:Z.Z,alt:"avatar",layout:"fill"})}),je&&!ye&&(0,n.jsx)("div",{className:"mx-[.12rem] text-[.14rem] text-color-text1",children:(0,xe.Q)(je,5)})]})]}),(0,n.jsxs)("div",{className:"flex flex-col items-end",children:[(0,n.jsx)("div",{className:"mt-[.16rem] text-color-text2 text-[.14rem]",children:"Receiving Address"}),(0,n.jsxs)("div",{className:"mt-[.06rem] flex items-center rounded-[.3rem] justify-between",children:[(0,n.jsxs)("div",{className:a()("h-[.42rem] flex items-center rounded-[.4rem] border-solid border-[0.01rem] border-color-border4 bg-color-bg2 overflow-hidden",ye?"":"cursor-pointer"),onClick:()=>{ye||(Ee(Ye),we(!0))},children:[(0,n.jsx)("div",{className:"ml-[.04rem] w-[.34rem] min-w-[.34rem] h-[.34rem] relative",children:(0,n.jsx)(h(),{src:$.Z,alt:"avatar",layout:"fill"})}),ye?(0,n.jsx)("div",{className:"flex-1 mx-[.12rem] w-[3rem] max-w-[3rem]",children:(0,n.jsx)(o.B,{value:Be,handleValueChange:Ee,placeholder:"Receiving Address",fontSize:".14rem"})}):(0,n.jsx)("div",{className:"mx-[.12rem] text-[.14rem] text-color-text1",children:(0,xe.Q)(Ye,5)})]}),ye&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:a()("ml-[.06rem] w-[.22rem] min-w-[.22rem] h-[.22rem] relative",nr?"cursor-pointer":""),onClick:()=>{nr&&(Fe(Be),we(!1))},children:(0,n.jsx)(h(),{src:nr?X.Z:G.Z,alt:"avatar",layout:"fill"})}),(0,n.jsx)("div",{className:"ml-[.1rem] text-color-text2 text-[.14rem] cursor-pointer",onClick:()=>{we(!1)},children:"Cancel"})]})]})]})]}),(0,n.jsxs)("div",{className:"h-[1.07rem] bg-color-bgPage rounded-[.3rem] flex justify-between items-stretch",children:[(0,n.jsxs)("div",{className:"ml-[.12rem]",children:[(0,n.jsx)("div",{className:"ml-[.12rem] mt-[.16rem] text-color-text2 text-[.14rem]",children:"Bridge From"}),(0,n.jsx)(g,{isFrom:!0,selectionList:Ve,selectedStandard:Ie,onChange:e=>{r.replace({pathname:r.pathname,query:{...r.query,srcTokenStandard:e,...Te===e?{dstTokenStandard:Ie}:{}}},void 0,{scroll:!1})}})]}),(0,n.jsx)("div",{className:"mt-[.4rem] mx-[.27rem] w-[.36rem] h-[.36rem] flex items-center justify-center rounded-[.06rem] bg-bgHover dark:bg-bgHoverDark",children:(0,n.jsx)(l.j,{icon:"arrow-right",size:".16rem",color:ar?"#ffffff80":"#222C3C"})}),(0,n.jsxs)("div",{className:"mr-[.12rem]",children:[(0,n.jsx)("div",{className:"ml-[.12rem] mt-[.16rem] text-color-text2 text-[.14rem]",children:"Bridge To"}),(0,n.jsx)(g,{selectionList:Je,selectedStandard:Te,onChange:e=>{r.replace({pathname:r.pathname,query:{...r.query,dstTokenStandard:e,...Ie===e?{srcTokenStandard:Te}:{}}},void 0,{scroll:!1})}})]})]}),(0,n.jsxs)("div",{className:"mt-[.12rem] h-[1.07rem] px-[.12rem] bg-color-bgPage rounded-[.3rem] flex justify-between",children:[(0,n.jsx)("div",{className:"mt-[.24rem]",children:(0,n.jsx)(p,{disabled:!Ie||!Te,selectionList:ir,srcTokenStandard:Ie,selectedTokenName:Oe,onChange:e=>{r.replace({pathname:r.pathname,query:{...r.query,tokenName:e}},void 0,{scroll:!1})}})}),(0,n.jsxs)("div",{className:"mt-[.1rem] ml-[.16rem] flex-1 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:a()(Ke?"":"invisible"),children:[(0,n.jsx)("div",{className:"h-[.36rem] flex items-center",children:(0,n.jsx)(m.a,{value:Ce,handleValueChange:ke,placeholder:"Amount",fontSize:".24rem"})}),(0,n.jsxs)("div",{className:a()("mt-[.12rem] text-[.14rem] text-color-text2",Ce&&!isNaN(Number(Ce))&&Number(Ce)>0?"":"invisible"),children:["$",(0,k.uf)(Ue,{decimals:2})]})]}),(0,n.jsxs)("div",{className:"flex flex-col items-end",children:[(0,n.jsx)("div",{className:a()("cursor-pointer text-color-text1 text-[.16rem] bg-color-bg2 rounded-[.2rem] w-[.63rem] h-[.36rem] items-center justify-center",Ke?"flex":"hidden"),onClick:()=>{if(isNaN(Number(dr)))return;let e=Number(dr);const r=(0,k.uf)(e.toString(),{toReadable:!1,withSplit:!1});isNaN(Number(r))||ke(r)},children:"Max"}),(0,n.jsxs)("div",{className:a()("flex items-center",Ke?"mt-[.12rem]":"mt-[-.2rem]",Ie!==x.Yn.Arbitrum&&Ie!==x.Yn.Optimism&&Oe?"":"invisible"),children:[(0,n.jsx)("div",{className:"text-[.14rem] text-color-text2",children:"Balance"}),(0,n.jsx)("div",{className:"ml-[.1rem] text-[.16rem] text-color-text1",children:(0,k.uf)(dr)})]})]})]})]}),(0,n.jsx)(fe.o,{height:".56rem",mt:".2rem",type:xr?"secondary":"primary",disabled:cr,onClick:()=>{if(lr)(()=>{if(Ie!==x.Yn.Native&&Te!==x.Yn.Native||b){var e;if(Ie!==x.Yn.SPL&&Te!==x.Yn.SPL||Y)return Ie!==x.Yn.ICS20&&Te!==x.Yn.ICS20||(null===(e=re)||void 0===e?void 0:e.bech32Address)?Ie!==x.Yn.ERC20&&Te!==x.Yn.ERC20||j?Ie!==x.Yn.BEP20&&Te!==x.Yn.BEP20||j?void 0:(c(A.M_),void t((0,H.Q)(!0))):(c(A.S1),void t((0,H.Q)(!0))):void t((0,V.o2)([T.Q2]));t((0,V.GM)(!1))}else t((0,V.rF)(!0,x.Sq.Polkadot))})();else if(Ie&&Te)if(er)(0,C.nG)(er);else if(Ie!==x.Yn.ERC20||Number(v)===(0,P.V_)())if(Ie!==x.Yn.BEP20||Number(v)===(0,P.Az)())if(se&&"success"!==se.status&&"loading"!==se.status)ce.Z.warning("A swap operation is on-going, please wait");else if(Te!==x.Yn.SPL||"Create SPL Token Account"!==ur){if(!Ye){if("Connect Keplr"===ur)return void t((0,V.o2)(T.Q2));if("Connect MetaMask"===ur)return void t((0,H.Q)(!0));if("Connect Phantom"===ur)return void t((0,V.GM)(!1));if("Connect Polkadot.js"===ur)return void t((0,V.rF)(!0,x.Sq.Polkadot))}ur.startsWith("Insufficient FIS.")?t((0,H.ll)(!0)):Ye&&Oe&&(Ie===x.Yn.Native?t((0,Q.ui)(Te,Oe,(0,z.tL)(Oe),Ce,Ye,(()=>{ke(""),Oe===x.O_.FIS?t((0,M.Ri)(x.Yn.Native)):t((0,M.G)(x.Yn.Native,(0,z.Sv)(Oe)))}))):Ie===x.Yn.ERC20?t((0,Q.M4)($e,He,Te,Oe,(0,z.tL)(Oe),Ce,Ye,(()=>{ke(""),Oe===x.O_.FIS?t((0,M.Ri)(x.Yn.ERC20)):t((0,M.G)(x.Yn.ERC20,(0,z.Sv)(Oe)))}))):Ie===x.Yn.BEP20?t((0,Q.e3)($e,Qe,Te,Oe,(0,z.tL)(Oe),Ce,Ye,(()=>{ke(""),Oe===x.O_.FIS?t((0,M.Ri)(x.Yn.BEP20)):t((0,M.G)(x.Yn.BEP20,(0,z.Sv)(Oe)))}))):Ie===x.Yn.SPL?t((0,Q.P9)(Te,Oe,(0,z.tL)(Oe),Ce,Ye,(()=>{ke(""),Oe===x.O_.FIS?t((0,M.Ri)(x.Yn.SPL)):t((0,M.G)(x.Yn.SPL,(0,z.Sv)(Oe)))}))):Ie===x.Yn.ICS20&&t((0,Q.o5)(Te,Oe,(0,z.tL)(Oe),Ce,Ye,(()=>{ke(""),Oe===x.O_.FIS?t((0,M.Ri)(x.Yn.ICS20)):t((0,M.G)(x.Yn.ICS20,(0,z.Sv)(Oe)))}))))}else(async()=>{t((0,H.wt)(!0));const e=await(0,ue.Nq)(Ye,(0,z.tL)(Oe));t((0,H.wt)(!1)),e&&Re(!1)})();else f&&f((0,P.Az)());else f&&f((0,P.V_)())},children:(0,n.jsxs)("div",{className:"flex items-center",children:[ur,xr&&(0,n.jsx)("div",{className:"ml-[.12rem] flex items-center",children:(0,n.jsx)(l.j,{icon:"arrow-right",size:".12rem",color:"#222C3C"})})]})}),Ke&&(0,n.jsx)("div",{className:"flex justify-end items-center text-color-text2 mt-[.2rem]",children:(0,n.jsx)(y,{fee:or})})]})})}}}]);